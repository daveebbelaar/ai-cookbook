# ساختمان مؤثر LLM در پایتون خالص

این مخزن حاوی الگوهای عملی و نمونه هایی برای ساخت سیستم های مؤثر LLM است.این الگوهای بر اساس پیاده سازی های دنیای واقعی و درسهای آموخته شده از کار با سیستم های تولید ، به جای چارچوب های پیچیده ، بر سادگی و ترکیب پذیری تمرکز می کنند.

این که آیا شما در حال ساختن عوامل خودمختار هستید یا گردش کار ساختاری ، الگوهای اثبات شده ای را پیدا خواهید کرد که فقط با چند خط کد قابل اجرا هستند.هر الگوی با نمونه ها و نمودارهای عملی نشان داده شده است تا به شما در درک اینکه چه موقع و چگونه می توانید آنها را به طور مؤثر اعمال کنید ، نشان داده شده است.

در مورد تئوری و تمرین در پشت این الگوهای بیشتر بدانید:
- [ساختمان عوامل مؤثر] (https://www.anthropic.com/research/building-effice-agents)- پست وبلاگ Anthropic
- [راهنمای ویدئویی الگوهای عملی LLM] (https://youtu.be/tx5oapbk-8a) - پیاده روی ویدیویی مفاهیم کلیدی توسط دیو ابربلاار

## جدول محتوا

در این آموزش ، ما همه چیزهایی را که لازم دارید برای شروع به ساختن عوامل هوش مصنوعی در پایتون خالص پوشش خواهیم داد.ما با بلوک های ساختمانی ضروری شروع خواهیم کرد و سپس برای سیستم های قابل اطمینان تر به الگوهای گردش کار شیرجه می شویم.برای دنبال کردن ، مهارت های اساسی پایتون به همراه آشنایی با OpenAi SDK و یک کلید API توصیه می شود.من به شدت کلون کردن مخزن GitHub را توصیه می کنم تا بتوانید از طریق کد گام به گام کار کنید.من را ابتدا از آن عبور کنید ، سپس خودتان آن را امتحان کنید تا درک خود را تقویت کنید.من به سرعت حرکت می کنم تا در 45 دقیقه مقدار زیادی را بپوشانم ، اما شما همیشه می توانید مکث کنید ، به عقب برگردید یا از Chatgpt کمک بخواهید.

قسمت 1: بلوک ساختمان: LLM افزوده

- تماسهای اساسی LLM
- خروجی ساختاری
- استفاده از ابزار
- بازیابی

قسمت 2: الگوهای گردش کار برای ساخت سیستم های AI

- زنجیر سریع
- مسیریابی
- موازی سازی

## الگوهای گردش کار

### زنجیر سریع

زنجیره سریع الگوی قدرتمندی است که وظایف پیچیده AI را به دنباله ای از مراحل کوچکتر و متمرکز تر تجزیه می کند.هر مرحله در زنجیره خروجی از مرحله قبلی را پردازش می کند و امکان کنترل بهتر ، اعتبار سنجی و قابلیت اطمینان را فراهم می کند.

#### تقویم دستیار مثال

دستیار تقویم ما یک زنجیره سریع 3 مرحله ای را با اعتبارسنجی نشان می دهد:

`` `پری دریایی
نمودار LR
A [ورودی کاربر] -> B [LLM 1: عصاره]
B -> C {Check Check}
ج -> | پاس |D [LLM 2: جزئیات تجزیه]
ج -> | شکست |E [خروج]
D -> F [LLM 3: تأیید تولید]
f -> g [خروجی نهایی]
`` `

#### مرحله 1: عصاره و اعتبارسنجی

- تعیین می کند که آیا ورودی در واقع یک درخواست تقویم است
- نمره اطمینان را ارائه می دهد
- برای جلوگیری از پردازش درخواست های نامعتبر به عنوان یک فیلتر اولیه عمل می کند

#### مرحله 2: جزئیات تجزیه

- اطلاعات تقویم خاص را استخراج می کند
- ساختار داده ها (تاریخ ، زمان ، شرکت کنندگان و غیره)
- زبان طبیعی را به داده های ساخت یافته تبدیل می کند

#### مرحله 3: تأیید ایجاد کنید

- یک پیام تأیید کاربر پسند ایجاد می کند
- به صورت اختیاری پیوندهای تقویم ایجاد می کند
- پاسخ نهایی کاربر را ارائه می دهد

### مسیریابی

مسیریابی الگویی است که انواع مختلفی از درخواست ها را به دستگیرندگان تخصصی هدایت می کند.این امر امکان پردازش بهینه شده از انواع درخواست مجزا را در حالی که جداسازی تمیز نگرانی ها را فراهم می کند ، امکان پذیر است.

#### تقویم دستیار مثال

دستیار تقویم ما مسیریابی بین ایجاد رویداد جدید و اصلاح رویداد را نشان می دهد:

`` `پری دریایی
نمودار LR
A [ورودی کاربر] -> B [LLM روتر]
B -> C {مسیر}
ج -> | رویداد جدید |D [کنترل کننده رویداد جدید]
ج -> | اصلاح رویداد |E [اصلاح کننده رویداد]
ج -> | دیگر |f [خروج]
D -> G [پاسخ]
E -> g
`` `

#### روتر

- نوع درخواست را طبقه بندی می کند (رویداد جدید/اصلاح)
- امتیاز دهی اعتماد به نفس را فراهم می کند
- ورودی را تمیز و استاندارد می کند

#### دستگیرندگان تخصصی

- کنترل کننده رویداد جدید: رویدادهای تقویم را ایجاد می کند
- اصلاح کننده رویداد: به روزرسانی رویدادهای موجود
- هر یک برای کار خاص خود بهینه شده است

### موازی سازی

موازی سازی چندین تماس LLM را به طور همزمان برای اعتبارسنجی یا تجزیه و تحلیل جنبه های مختلف یک درخواست به طور همزمان اجرا می کند.

#### تقویم دستیار مثال

دستیار تقویم ما نگهبان های اعتبار سنجی موازی را پیاده سازی می کند:

`` `پری دریایی
نمودار lحرف
A [ورودی کاربر] -> B [بررسی تقویم]
A -> C [بررسی امنیتی]
B -> D {جمع}
ج -> D
D -> | معتبر |E [ادامه]
D -> | نامعتبر |f [خروج]
`` `

#### بررسی های موازی

- اعتبار سنجی تقویم: درخواست تقویم معتبر را تأیید می کند
- بررسی امنیتی: صفحه نمایش برای تزریق سریع
- همزمان برای عملکرد بهتر اجرا کنید

#### تجمع

- نتایج اعتبار سنجی را ترکیب می کند
- قوانین اعتبار سنجی را اعمال می کند
- تصمیم نهایی را قبول می کند/رد می کند

### کارگران ارکستر

الگوی ارکستراتور کارگران از LLM مرکزی برای تجزیه و تحلیل پویا وظایف ، هماهنگی کارگران تخصصی و سنتز نتایج آنها استفاده می کند.این یک سیستم انعطاف پذیر ایجاد می کند که می تواند ضمن حفظ پردازش تخصصی ، با انواع مختلف درخواست ها سازگار شود.

#### مثال نوشتن وبلاگ

سیستم نوشتن وبلاگ ما الگوی ارکستر را برای ایجاد محتوا نشان می دهد:

`` `پری دریایی
نمودار LR
A [ورودی موضوع] -> B [Orchestrator]
B -> C [مرحله برنامه ریزی]
ج -> D [مرحله نوشتن]
D -> E [مرحله بررسی]
Style D Fill:#F9F ، سکته مغزی:#333 ، Width Width: 2px
`` `

#### ارکستر

- موضوع و الزامات وبلاگ را تجزیه و تحلیل می کند
- برنامه محتوای ساختاری را ایجاد می کند
- نوشتن بخش هماهنگی
- جریان و انسجام محتوا را مدیریت می کند

#### مرحله برنامه ریزی

- پیچیدگی موضوع را تجزیه و تحلیل می کند
- مخاطبان هدف را مشخص می کند
- محتوا را به بخش های منطقی می شکند
- تعداد کلمات را در هر بخش اختصاص می دهد
- دستورالعمل های سبک نوشتن را تعریف می کند

#### مرحله نوشتن

- کارگران تخصصی بخش های فردی را می نویسند
- هر بخش زمینه را از بخش های قبلی حفظ می کند
- از دستورالعمل های سبک و طول پیروی می کند
- برای هر بخش نکات کلیدی را ضبط می کند

#### مرحله مرور

- انسجام کلی را ارزیابی می کند
- نمرات جریان محتوا (0-1)
- پیشرفت های خاص بخش را پیشنهاد می کند
- نسخه نهایی جلا تولید می کند